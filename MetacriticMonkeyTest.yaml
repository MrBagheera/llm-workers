# General definition of tools. To be available for LLM, tool reference has to be included in
# LLM definition as well.
custom_tools:
  # stub implementation of metacritic_monkey
  - name: metacritic_monkey
    tool_type: debug
    description: >
      Finds the Metacritic score for a given movie title and year. Returns either a single number or "N/A" if the movie is not found.
    params:
      - name: movie_title
        description: Movie title
        type: str
      - name: movie_year
        description: Movie release year
        type: str
    match_value: "{movie_title} ({movie_year})"
    matchers:
      - case: "Soul (2020)"
        result: 83
      - case: "Wallace & Gromit: The Curse of the Were-Rabbit (2005)"
        result: 87
      - case: "The Incredibles (2004)"
        result: 90
      - case: "Finding Nemo (2003)"
        result: 90
    default_result: "N/A"
  # just an example for future
  - name: metacritic_monkeyz
    tool_type: LLM
    description: >
      Finds the Metacritic score for a given movie title and year. Returns either a single number or "N/A" if the movie is not found.
    params:
      - name: movie_title
        description: Movie title
        type: str
      - name: movie_year
        description: Movie release year
        type: int
    tool_refs:
        - fetch_url_text
    instructions: >
      Your job is to find the Metacritic score for a movie {movie_title} released in year {movie_year}.
      To do so:
      - Fetch page text from `https://www.metacritic.com/search/{movie_title}/?page=1&category=2` 
      - From the list of (movie title, release year, metacritic score), chose the one best matching the title and year
      and return metacritic score as single number
      - If the movie is not found, return "N/A" (without quotes)

main:
  provider: ollama
  model: llama3.1
  instructions: >
    Your job is to find metacritic score for the movie "Soul" (2020).
  interactive: false
  verbose: true
  tool_refs:
    - metacritic_monkey
